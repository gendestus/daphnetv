services:
  daphnetv:
    build: .
    container_name: daphnetv
    restart: unless-stopped

    volumes:
      # Jellyfin media library (read-only) - update path for your setup
      - /path/to/jellyfin/media:/media:ro

      # Your ads directory - update path for your setup
      - /path/to/ads:/ads:ro

      # Persistent config and state
      - ./config:/config

      # Stream output
      - ./stream:/stream

    environment:
      # host.docker.internal for Jellyfin on host (extra_hosts required on Linux)
      - JELLYFIN_URL=http://host.docker.internal:8096
      - JELLYFIN_API_KEY=your-api-key-here
      - CHANNEL_ID=kids-channel-1
      - TZ=America/New_York

    # Bind to all interfaces so desktop PC can preview channels
    ports:
      - "0.0.0.0:8001:8001"

    # Required on Linux for container to reach host (Jellyfin)
    extra_hosts:
      - "host.docker.internal:host-gateway"
